<kendo-grid
  [data]="gridData"
  [loading]="isLoading"
  [pageSize]="take"
  [pageable]="pageable"
  [skip]="skip"
  [sort]="sort"
  [sortable]="true"
  class="grid-borderless h-full"
  scrollable="scrollable"
  uiKendoUrlPaging
  uiKendoUrlSorting
>
  <ng-template kendoGridLoadingTemplate>
    <ui-loader [disableInfo]="true" class="bg-white bg-opacity-60" />
  </ng-template>
  <kendo-grid-column
    [headerStyle]="{ 'font-weight': '700' }"
    field="name"
    title="Note Title"
  >
    <ng-template kendoGridCellTemplate let-dataItem>
      <!--      <ng-container *ngIf="!isLoading; else skeleton">-->
      <kendo-button
        [queryParams]="{ 'note-details': dataItem.id }"
        [routerLink]="['./']"
        fillMode="link"
        queryParamsHandling="merge"
      >
        {{ dataItem?.name }}
      </kendo-button>
      <!--      </ng-container>-->
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column
    [headerStyle]="{ 'font-weight': '700' }"
    [sortable]="false"
    [width]="150"
    field="templateName"
    title="Note Type"
  >
    <ng-template kendoGridCellTemplate let-dataItem>
      <!--      <ng-container *ngIf="!isLoading; else skeleton">-->
      <app-note-type-badge [type]="dataItem.templateName"></app-note-type-badge>
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column
    [headerStyle]="{ 'font-weight': '700' }"
    field="updatedAt"
    title="Updated"
  >
    <ng-template kendoGridCellTemplate let-dataItem>
      <!--      <ng-container *ngIf="!isLoading; else skeleton">-->
      <div class="flex flex-col gap-1">
        <ui-tag uiUserTag [label]="dataItem?.createdBy?.name || ''" />

        <span class="text-xs">
          Updated:
          {{ dataItem?.updatedAt || '' | date: 'dd/MM/yyyy hh:mm a' }}
        </span>
      </div>
      <!--      </ng-container>-->
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column
    [headerStyle]="{ 'font-weight': '700' }"
    [sortable]="false"
    field="people"
    title="People"
  >
    <ng-template kendoGridCellTemplate let-dataItem>
      <!--      <ng-container *ngIf="!isLoading; else skeleton">-->
      <div
        [gap]="12"
        class="flex h-[2.5rem] flex-row flex-wrap items-center gap-[0_0.75rem] overflow-hidden text-base"
        truncateElements
      >
        <ui-tag
          uiUserTag
          *ngFor="let tag of dataItem?.tags | tagFilter: ['people']"
          [label]="tag.name"
        />
      </div>
      <!--      </ng-container>-->
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column
    [headerStyle]="{ 'font-weight': '700' }"
    [sortable]="false"
    field="tags"
    title="Tags"
  >
    <ng-template kendoGridCellTemplate let-dataItem>
      <!--      <ng-container *ngIf="!isLoading; else skeleton">-->
      <div
        [gap]="12"
        class="flex h-[2.5rem] flex-row flex-wrap items-center gap-[0_0.75rem] overflow-hidden text-sm"
        suffixInfo="more"
        truncateElements
      >
        <ui-tag
          *ngFor="let tag of dataItem?.tags | tagFilter: ['people'] : false"
          [label]="tag.name"
          icon="fa-regular fa-tag"
          [style]="tag.type | tagTypeColor"
        ></ui-tag>
        <!--        <div-->
        <!--          *ngFor="let tag of dataItem?.tags | tagFilter: ['people'] : false"-->
        <!--          [ngClass]="{-->
        <!--            'text-error': tag.type === 'company' || tag.type === 'opportunity',-->
        <!--            'text-success': tag.type === 'industry',-->
        <!--            'text-warning': tag.type === 'investor',-->
        <!--            'text-primary-900': tag.type === 'businessModel'-->
        <!--          }"-->
        <!--          class="lex items-center gap-1"-->
        <!--        >-->
        <!--          <i class="fa-regular fa-tag"></i>-->

        <!--          {{ tag.name }}-->
        <!--        </div>-->
      </div>
      <!--      </ng-container>-->
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column [width]="135">
    <ng-template kendoGridCellTemplate let-dataItem>
      <!--      <ng-container *ngIf="!isLoading; else skeleton">-->
      <div class="flex flex-row gap-1" kendoTooltip>
        <kendo-button
          [queryParams]="{ 'note-details': dataItem.id }"
          queryParamsHandling="merge"
          [routerLink]="['./']"
          iconClass="fa-solid fa-eye"
          themeColor="primary"
        />
        <kendo-button
          [uiClipboard]="getNoteUrl(dataItem.id)"
          iconClass="fa-solid fa-link"
          themeColor="light"
        />
        <div [title]="dataItem.deleteButtonSettings?.tooltip">
          <kendo-button
            (click)="handleDeleteNote(dataItem)"
            [class.!opacity-20]="dataItem.deleteButtonSettings?.disabled"
            [disabled]="dataItem.deleteButtonSettings?.disabled"
            iconClass="fa-solid fa-trash-can"
            themeColor="light"
          />
        </div>
      </div>
      <!--      </ng-container>-->
    </ng-template>
  </kendo-grid-column>
</kendo-grid>
<ng-template #skeleton>
  <kendo-skeleton
    shape="text"
    animation="wave"
    width="80%"
    [height]="20"
  ></kendo-skeleton>
</ng-template>
