<div
  class="opportunity-card | border-component-border group flex cursor-pointer flex-col rounded-lg bg-white p-4 hover:bg-opacity-80"
>
  <div class="text-base-text mb-7 flex justify-between gap-2 overflow-hidden">
    <div
      [routerLink]="['/companies', data.organisation.id]"
      title="View Company Profile"
      class="hover:text-primary-600 flex-1 grow cursor-pointer items-center gap-3 overflow-hidden overflow-hidden transition-all duration-100"
    >
      <h1 class="mb-1 flex items-center gap-2 truncate text-lg">
        {{ data.organisation.name }}
      </h1>
      <p class="truncate text-sm">
        {{ data.organisation.domains.join(', ') }}
      </p>
    </div>
    <div>
      <i
        class="fa-regular fa-buildings group-hover:hidden"
        style="font-size: 27px"
      ></i>
      <div class="hidden group-hover:block">
        <kendo-button
          [routerLink]="[
            '/companies',
            data.organisation.id,
            'opportunities',
            data.id
          ]"
          fillMode="outline"
          themeColor="primary"
        >
          Open Details
        </kendo-button>
      </div>
    </div>
  </div>
  <!--      [class.invisible]="hovered.hovered"-->
  <div class="relative">
    <div
      *ngIf="data.team | dealLeads as dealLeads"
      class="text-component-text overflow-hidden group-hover:invisible"
    >
      <div>
        <div
          [class.invisible]="!dealLeads.length"
          class="flex items-center gap-2"
        >
          <p class="w-20 text-sm">Deal Lead:</p>
          <p class="flex-1 overflow-hidden truncate text-lg">
            {{ dealLeads[0] }}
          </p>
        </div>
      </div>
    </div>
    <div class="absolute top-0 hidden w-full justify-center group-hover:flex">
      <kendo-button
        (click)="openAffinityUrl()"
        *ngIf="affinityUrl; else dragInfo"
        fillMode="flat"
        themeColor="primary"
      >
        <span class="flex gap-1">
          Open in
          <img alt="affinity logo" src="assets/images/affinity.svg" />
        </span>
      </kendo-button>
    </div>
  </div>
  <ng-template #openDetailsBtn>
    <kendo-button
      [routerLink]="[
        '/companies',
        data.organisation.id,
        'opportunities',
        data.id
      ]"
      fillMode="outline"
      themeColor="primary"
    >
      Open Details
    </kendo-button>
  </ng-template>
</div>

<ng-template #dragInfo>
  <p class="text-disabledText">Drop into preferred pipeline stage</p>
</ng-template>
