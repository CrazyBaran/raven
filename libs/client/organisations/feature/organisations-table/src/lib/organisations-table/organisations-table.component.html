<div class="pipeline-page">
  <app-page-template pageIcon="fa-regular fa-fire" pageName="All Companies">
    <div class="flex items-center gap-3" page-header-actions>
      <app-text-box-navigation
        [queryParamName]="vm().queryModel.queryParamName"
        [placeholder]="vm().queryModel.placeholder"
        [urlValue]="vm().queryModel.urlValue!"
      />

      <kendo-button
        fillMode="flat"
        iconClass="fa-solid fa-square-plus"
        size="large"
        themeColor="secondary"
        (click)="openOrganisationDialog()"
        >Add New</kendo-button
      >
      <kendo-button
        fillMode="flat"
        iconClass="fa-solid fa-filter"
        size="large"
        themeColor="secondary"
        >Filters</kendo-button
      >
    </div>

    <div class="flex h-full flex-col gap-10" page-content>
      <app-quick-filters-template>
        <div class="flex gap-6">
          <app-buttongroup-navigation [model]="vm().buttonGroupNavigation">
          </app-buttongroup-navigation>

          <app-dropdown-navigation
            *rxFor="
              let dropdown of vm().navigationDropdowns;
              trackBy: 'queryParamName'
            "
            [model]="dropdown"
          >
          </app-dropdown-navigation>
        </div>
      </app-quick-filters-template>

      <div class="flex-1 shrink-0">
        <div
          class="flex h-full w-full flex-col items-center justify-center"
          *rxIf="vm().isLoading; else table"
        >
          <kendo-loader
            class="mb-4"
            themeColor="primary"
            type="infinite-spinner"
          />
          Loading...
        </div>
      </div>
    </div>
  </app-page-template>
</div>

<ng-template #table>
  <app-organisations-table-view
    [organisations]="vm().organisations"
  ></app-organisations-table-view>
</ng-template>
